# AI_Plugin VSCode 插件

## 项目概述
AI_Plugin 是一个功能强大的 VSCode 插件，旨在提供一个友好的 Web 界面，实现用户与本地命令行服务之间的交互。该插件允许用户在 VSCode 内通过 Web 视图进行多轮次交互，并将命令执行结果以丰富的格式展示给用户。

## 主要功能

1. **活动栏集成**：在 VSCode 活动栏添加专用按钮，点击后在编辑区创建 Webview
2. **交互式 Web 界面**：Webview 中提供用户友好的交互界面，支持多轮次对话
3. **主命令执行**：接收用户输入，输入包含(用户输入，工程路径，工程信息，建议json格式表达），调用本地命令行服务执行任务，此主入口命令行在插件tools目录下的interactive-tool.py ，输出文本、图片、表格、代码等多种格式信息（建议json格式表达）
4. **丰富的结果展示**：支持文本、图片、表格、代码等多种格式的结果显示
5. **输出命令行代码支持立即执行**：在命令行代码展示区域支持按钮执行，并下发到终端通道执行
6. **状态反馈**：执行过程中显示运行状态（运行中、成功、失败等），运行中禁止重复提交
7. **终端通道输出**：将命令执行结果实时输出到 VSCode 终端通道，方便调试和查看
8. **插件配置**：支持自定义配置插件行为，如设置输出的代码支持自动执行
9. **插件状态显示**：在 VSCode 状态栏显示插件当前运行状态（如已激活、未激活等）
10. **插件日志记录**：支持插件运行时的调试日志输出到输出通道（ai-plugin通道），方便调试和问题排查
备注： 
    支持两钟执行：
       - 主执行， 调用tools/interactive-tool.py ; 其中输出到界面webview渲染， 当输出的类型是命令行代码，webview 命令行代码支持立即执行（阻塞主执行输出信息的显示），是第二种执行模式,
       - 第二种执行分两步
         1、是直接把命令行代码发送到终端执行，
         2、捕获终端执行结果交给 tools/execinfo.py 处理，
          - 使用和第一种调用相同的json输入和输出，直到execinfo.py返回的信息中描述命令行执行成功，才继续主执行的余下的执行输出显示
## 技术架构

### 前端实现
- 使用 Vue 2 构建交互式 Web 界面
- 直接引用 Vue 库，无需编译构建过程
- 静态资源（JS、CSS、HTML）与插件代码分离
- Webview 内容通过直接引用 Vue 库的 HTML 模板生成

### 后端实现
- VSCode 插件作为中间层，连接前端 Webview 和本地服务
- 采用 TypeScript 开发 VSCode 插件核心功能
- 支持扩展的 JSON 格式传递数据（包含用户输入文本、工作区路径等信息）
- 本地命令行服务接口预留（当前版本提供模拟实现）

## 项目结构

```
├── .gitignore        # Git 忽略配置
├── design.md         # 设计文档
├── readme.md         # 项目说明文档（当前文件）
├── requirements.md   # 需求文档
└── test-cases.md     # 测试用例文档
```

## 使用方法

1. 在 VSCode 活动栏点击插件图标打开 Webview
2. 在 Webview 界面输入框中输入您的指令或问题
3. 点击发送按钮提交请求
4. 等待命令执行完成，查看结果展示
5. 可继续输入新的指令进行下一轮交互

## 开发说明

### 前端开发
- 前端代码采用直接 JS 方式实现，无需编译构建
- Webview 内容通过 HTML 模板动态生成
- 静态资源直接从项目目录加载

### 插件开发
- 遵循 VSCode 插件开发规范
- 使用 TypeScript 实现插件核心功能
- 通过 Webview API 与前端进行通信

## 未来规划
- 实现完整的本地命令行服务
- 支持更多类型的结果展示
- 增强用户交互体验
- 添加更多自定义配置选项

## 注意事项
- 当前版本的本地命令行服务为模拟实现
- 确保您的 VSCode 版本兼容该插件
- 插件运行过程中请保持网络连接稳定

## 版权说明
本项目采用 **MIT 许可证（MIT License）** 开源，允许用户自由分发、修改和使用本项目，但必须保留原作者的署名。

MIT 许可证是一种宽松的开源许可证，符合您的需求：允许自由分发但要求保留署名。

**使用条款**：
- 您可以复制、修改、合并、发布、分发、再许可和/或销售本项目的副本
- 您必须在所有副本或重要部分保留原始版权声明和本许可声明
- 在使用本项目的代码、功能或创意时，请注明"使用了 AI_Plugin VSCode 插件项目"或类似表述

通过使用本项目，您同意遵守上述条款。
